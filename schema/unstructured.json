{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Unstructured Parser Output Schema",
  "description": "Schema for JSON output produced by the UnstructuredParser",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Processing metadata for the unstructured file",
      "properties": {
        "processing_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when the file was processed"
        },
        "source_file": {
          "type": "string",
          "description": "Original filename (without full path for privacy)"
        },
        "contextual_documents_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of contextual documents generated from the file"
        }
      },
      "required": ["processing_timestamp", "source_file", "contextual_documents_count"],
      "additionalProperties": false
    },
    "contextual_documents": {
      "type": "array",
      "description": "Array of contextual documents extracted from the unstructured file",
      "items": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Extracted text content from the document chunk"
          },
          "well_id": {
            "type": "string",
            "description": "Well identifier extracted by LLM (e.g., '15/9-F-11')"
          },
          "depth_references": {
            "type": "array",
            "items": {
              "oneOf": [
                {"type": "number"},
                {"type": "string"}
              ]
            },
            "description": "Depth values extracted by LLM from the content"
          },
          "technical_terms": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Technical terms and jargon extracted by LLM"
          },
          "mathematical_formulas": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Mathematical formulas and equations extracted by LLM"
          },
          "geological_context": {
            "type": "object",
            "properties": {
              "formations": {
                "type": "array",
                "items": {"type": "string"},
                "description": "Geological formations mentioned in the content"
              },
              "field": {
                "oneOf": [
                  {"type": "string"},
                  {"type": "null"}
                ],
                "description": "Oil field name if mentioned"
              }
            },
            "additionalProperties": false
          },
          "curve_names": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Well log curve names extracted by LLM"
          },
          "document_type": {
            "type": "string",
            "description": "Document type extracted by LLM (e.g., 'facies_data', 'petrophysical_report', 'md_plot') or fallback to parser element type"
          },
          "source": {
            "type": "string",
            "description": "Original filename (without full path for privacy)"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp when this contextual document was created"
          },
          "metadata": {
            "type": "object",
            "description": "Record identification metadata",
            "properties": {
              "chunk_id": {
                "type": "integer",
                "minimum": 0,
                "description": "Sequential identifier for this chunk within the file"
              },
              "total_chunks": {
                "type": "integer",
                "minimum": 1,
                "description": "Total number of chunks in the original file"
              },
              "element_type": {
                "type": "string",
                "description": "Type of element extracted by UnstructuredParser (e.g., 'CompositeElement', 'TableChunk', 'Text')"
              },
              "chunk_type": {
                "type": "string",
                "description": "Type of chunking applied (e.g., 'semantic_section')"
              }
            },
            "required": ["chunk_id", "total_chunks", "element_type", "chunk_type"],
            "additionalProperties": false
          }
        },
        "required": ["content", "well_id", "depth_references", "technical_terms", "mathematical_formulas", "geological_context", "curve_names", "document_type", "source", "timestamp", "metadata"],
        "additionalProperties": false
      },
      "minItems": 0
    }
  },
  "required": ["metadata", "contextual_documents"],
  "additionalProperties": false,
  "examples": [
    {
      "metadata": {
        "processing_timestamp": "2025-08-12T02:52:04.512773",
        "source_file": "15_9-F-11 Facies.xlsx",
        "contextual_documents_count": 2
      },
      "contextual_documents": [
        {
          "content": "NO 15/9-19 A 15/9-19 A GENETIC FACIES GM09 3821.6223 3829.7642 F-TIDAL BAR 100.0",
          "well_id": "15/9-19 A",
          "depth_references": [3821.6223, 3829.7642],
          "technical_terms": ["GENETIC FACIES", "F-TIDAL BAR"],
          "mathematical_formulas": [],
          "geological_context": {
            "formations": ["GM09"],
            "field": null
          },
          "curve_names": [],
          "document_type": "facies_data",
          "source": "15_9-F-11 Facies.xlsx",
          "timestamp": "2025-08-12T02:52:04.512582",
          "metadata": {
            "chunk_id": 0,
            "total_chunks": 522,
            "element_type": "TableChunk",
            "chunk_type": "semantic_section"
          }
        }
      ]
    }
  ]
} 